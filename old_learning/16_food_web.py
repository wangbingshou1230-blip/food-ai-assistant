import streamlit as st
import pandas as pd
import time

# 1. è®¾ç½®ç½‘é¡µæ ‡é¢˜å’Œå›¾æ ‡
st.set_page_config(page_title="FoodAI ç§‘ç ”ä¸­å°", page_icon="ğŸ§ª")

# 2. ä¾§è¾¹æ  (Sidebar) - ç›¸å½“äºåŸæ¥çš„ Tab åˆ‡æ¢
st.sidebar.title("åŠŸèƒ½å¯¼èˆª")
page = st.sidebar.radio("é€‰æ‹©æ¨¡å—", ["è¡Œä¸šæƒ…æŠ¥ç›‘æµ‹", "æ–‡çŒ®æ™ºèƒ½é˜…è¯»", "å®éªŒæ•°æ®åˆ†æ"])

# ================= æ¨¡å— 1ï¼šæƒ…æŠ¥ç›‘æµ‹ =================
if page == "è¡Œä¸šæƒ…æŠ¥ç›‘æµ‹":
    st.title("ğŸ•µï¸ è¡Œä¸šæƒ…æŠ¥ç›‘æµ‹")
    st.info("åŸºäº DeepSeek V3 çš„é£Ÿå“è¡Œä¸šæƒ…æŠ¥è‡ªåŠ¨åˆ†æç³»ç»Ÿ")
    
    # è¾“å…¥æ¡†
    keyword = st.text_input("è¯·è¾“å…¥ç›‘æµ‹å…³é”®è¯", "éçƒ­æ€èŒæŠ€æœ¯")
    
    if st.button("ğŸš€ å¼€å§‹åˆ†æ"):
        with st.spinner('æ­£åœ¨å…¨ç½‘æœç´¢å¹¶ç”Ÿæˆç®€æŠ¥...'):
            # è¿™é‡Œå‡è£…è¿è¡Œ (ä¹‹åæˆ‘ä»¬ä¼šæŠŠä¹‹å‰çš„é€»è¾‘æ¬è¿‡æ¥)
            time.sleep(2) 
            
        st.success("åˆ†æå®Œæˆï¼")
        
        # æ¨¡æ‹Ÿå±•ç¤ºç»“æœ (Markdown æ ¼å¼)
        st.markdown(f"""
        ### ğŸ“„ {keyword} - è¡Œä¸šç®€æŠ¥
        * **è¶‹åŠ¿**: 2026å¹´å¸‚åœºå…³æ³¨åº¦ä¸Šå‡ **15%**ã€‚
        * **æŠ€æœ¯**: è¶…é«˜å‹ (HPP) æŠ€æœ¯æˆæœ¬æ­£åœ¨ä¸‹é™ã€‚
        * **å»ºè®®**: å…³æ³¨æŸæŸå¤´éƒ¨ä¼ä¸šçš„æœ€æ–°åŠ¨å‘ã€‚
        """)

# ================= æ¨¡å— 2ï¼šæ–‡çŒ®é˜…è¯» =================
elif page == "æ–‡çŒ®æ™ºèƒ½é˜…è¯»":
    st.title("ğŸ“ æ–‡çŒ®æ™ºèƒ½é˜…è¯»")
    
    # æ–‡ä»¶ä¸Šä¼ å™¨ (Streamlit è‡ªå¸¦çš„ï¼Œè¶…å¥½ç”¨)
    uploaded_file = st.file_uploader("è¯·ä¸Šä¼  PDF æ–‡çŒ®", type="pdf")
    
    if uploaded_file is not None:
        st.success(f"å·²åŠ è½½æ–‡çŒ®: {uploaded_file.name}")
        # è¿™é‡Œå¯ä»¥åŠ ä¸ªæ–‡æœ¬æ¡†è®©ç”¨æˆ·æé—®
        st.text_input("ä½ æƒ³é—®è¿™ç¯‡è®ºæ–‡ä»€ä¹ˆé—®é¢˜ï¼Ÿ", "æ€»ç»“æ ¸å¿ƒåˆ›æ–°ç‚¹")

# ================= æ¨¡å— 3ï¼šæ•°æ®åˆ†æ =================
elif page == "å®éªŒæ•°æ®åˆ†æ":
    st.title("ğŸ“Š å®éªŒæ•°æ®åˆ†æ")
    
    # è¿™ä¸€å—å±•ç¤º Streamlit æœ€å¼ºçš„ç»˜å›¾èƒ½åŠ›
    st.write("æ¨¡æ‹Ÿç”Ÿæˆä¸€æ‰¹é…¸å¥¶å‘é…µæ•°æ®ï¼š")
    
    # é€ ç‚¹å‡æ•°æ®
    data = pd.DataFrame({
        'æ—¶é—´ (h)': range(24),
        'pHå€¼': [6.8 - x*0.1 for x in range(24)],
        'é…¸åº¦': [70 + x*2 for x in range(24)]
    })
    
    # ğŸ”¥ ä¸€è¡Œä»£ç ç”»å›¾ï¼æ¯” Matplotlib ç®€å•ä¸€ä¸‡å€ï¼Œè€Œä¸”æ˜¯äº¤äº’å¼çš„ï¼ˆé¼ æ ‡èƒ½æ‚¬åœï¼‰
    st.line_chart(data.set_index('æ—¶é—´ (h)'))
    
    st.dataframe(data) # ç›´æ¥æŠŠ Excel è¡¨æ ¼å±•ç¤ºåœ¨ç½‘é¡µä¸Š